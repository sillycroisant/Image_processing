clc; close; clearvars;

name = 'forest.jpg';
im = imread(name);
figure;
subplot(121), imshow(im), title('origin');

im = rgb2gray(im);
[row, col] = size(im);
g = gcd(row,col);

seg = zeros(size(im));

for i=1:3:row
    for j=1:3:col
        T = uint8(mean2(im(i:i+2,j:j+2)));
        seg(i:i+2,j:j+2) = im(i:i+2,j:j+2);
        seg
    end
end